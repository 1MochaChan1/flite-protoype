[gd_scene load_steps=14 format=3 uid="uid://urc4wu3taij5"]

[ext_resource type="Script" path="res://scripts/test_level.gd" id="1_yr0ih"]
[ext_resource type="PackedScene" uid="uid://dmr0fcamx7t56" path="res://addons/virtual_joystick/virtual_joystick_scene.tscn" id="2_7vfi6"]
[ext_resource type="Texture2D" uid="uid://b1dy636n7n5sr" path="res://assets/Anime Sky Texture.jpeg" id="3_3y6xs"]
[ext_resource type="PackedScene" uid="uid://difd4nyo42xes" path="res://scenes/third_person_controller.tscn" id="4_lswvb"]
[ext_resource type="PackedScene" uid="uid://c0s6fuhehlqdg" path="res://scenes/plane.tscn" id="5_lf72v"]
[ext_resource type="PackedScene" uid="uid://cnc7v3r2jna58" path="res://scenes/drop_point.tscn" id="6_77um1"]
[ext_resource type="Script" path="res://scripts/wind_current.gd" id="7_x0foo"]
[ext_resource type="PackedScene" uid="uid://b3qmxxr8mrplw" path="res://blender_meshes/terrain.tscn" id="8_x2cpq"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_6nhew"]
panorama = ExtResource("3_3y6xs")

[sub_resource type="Sky" id="Sky_6mfjr"]
sky_material = SubResource("PanoramaSkyMaterial_6nhew")

[sub_resource type="Environment" id="Environment_x5jjv"]
background_mode = 2
background_energy_multiplier = 0.5
sky = SubResource("Sky_6mfjr")
tonemap_mode = 3
tonemap_white = 0.5
fog_density = 0.0005
fog_aerial_perspective = 1.0

[sub_resource type="CylinderShape3D" id="CylinderShape3D_wfhfe"]
height = 56.6672
radius = 16.8475

[sub_resource type="ArrayMesh" id="ArrayMesh_783db"]

[node name="TestLevel" type="Node3D" node_paths=PackedStringArray("label")]
script = ExtResource("1_yr0ih")
messages = 3
label = NodePath("CanvasLayer/Control/Messages")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Control" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Velocity" type="Label" parent="CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -109.0
offset_top = 23.0
offset_right = -39.0
offset_bottom = 46.0
grow_horizontal = 0
text = "Velocity: "

[node name="Messages" type="Label" parent="CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -123.0
offset_top = 51.0
offset_right = -39.0
offset_bottom = 74.0
grow_horizontal = 0
text = "Messages: "

[node name="Lookstick" parent="CanvasLayer/Control" instance=ExtResource("2_7vfi6")]
layout_mode = 1
offset_left = 853.0
offset_right = 1153.0
visibility_mode = 1

[node name="Movestick" parent="CanvasLayer/Control" instance=ExtResource("2_7vfi6")]
layout_mode = 1
offset_top = -457.0
offset_right = 423.0
pivot_offset = Vector2(215, 230)
joystick_mode = 1
visibility_mode = 1

[node name="Base" parent="CanvasLayer/Control/Movestick" index="0"]
offset_left = -265.5
offset_top = -265.5
offset_right = 259.5
offset_bottom = 259.5
pivot_offset = Vector2(265, 265)
metadata/_edit_group_ = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_x5jjv")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 518.447, 0)
shadow_enabled = true

[node name="Camera" parent="." node_paths=PackedStringArray("follow_target", "v_joystick") instance=ExtResource("4_lswvb")]
follow_target = NodePath("../Plane")
pitch_sensi = 0.1
yaw_sensi = 0.1
v_joystick = NodePath("../CanvasLayer/Control/Lookstick")

[node name="Plane" parent="." node_paths=PackedStringArray("v_joystick") instance=ExtResource("5_lf72v")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -2659.44, 411.587, -17.4245)
v_joystick = NodePath("../CanvasLayer/Control/Movestick")
MAX_SPEED = 500.0
MIN_SPEED = 100.0
yaw_angle = 20

[node name="CSGBox3D" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 92.2363, 0)

[node name="DropPoint" parent="." instance=ExtResource("6_77um1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 32.3484, 0)

[node name="WindCurrent" type="Area3D" parent="."]
transform = Transform3D(0.659136, 0.749542, 0.0610441, 0, 0.0811731, -0.9967, -0.752024, 0.656961, 0.0535041, -89.2932, 107.115, -96.0984)
collision_layer = 16
script = ExtResource("7_x0foo")

[node name="CollisionShape3D" type="CollisionShape3D" parent="WindCurrent"]
shape = SubResource("CylinderShape3D_wfhfe")

[node name="Marker3D" type="Marker3D" parent="WindCurrent"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0216522, 30.7059, -0.0236282)
gizmo_extents = 9.59

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="WindCurrent"]
polygon = PackedVector2Array(-21.9177, -27.3678, -1.76277, 29.6008, 1.86141, 29.6234, 18.4323, -27.541)

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
mesh = SubResource("ArrayMesh_783db")

[node name="Terrain" parent="." instance=ExtResource("8_x2cpq")]
transform = Transform3D(200, 0, 0, 0, 200, 0, 0, 0, 200, 0, 0, 0)

[connection signal="body_entered" from="WindCurrent" to="WindCurrent" method="_on_body_entered"]
[connection signal="body_exited" from="WindCurrent" to="WindCurrent" method="_on_body_exited"]

[editable path="CanvasLayer/Control/Movestick"]
